# OpenVPN client configuration file
# Generated by Chef - local changes will be overwritten!

# Please refer to the OpenVPN documentation for details on
# configuration settings.

client
dev <%= node['openvpn']['config']['dev'].chomp('0') %>
proto <%= node['openvpn']['config']['proto'] %>
remote <%= node['openvpn']['gateway'] %> <%= node['openvpn']['config']['port'] %>
resolv-retry infinite
nobind
persist-key
persist-tun
ca ca.crt
cert <%= @client_cn %>.crt
key <%= @client_cn %>.key
<% if @compression -%>
<%= @compression %>
<% end %>
<% 
%w(cipher tls-cipher auth keysize link-mtu).each do |conf| 
  if node['openvpn']['config'][conf]
%><%= "#{conf} #{node['openvpn']['config'][conf]}" %>
<%
  end
end 
-%>
verb 3
<% if node['openvpn']['server_verification'] -%>
<%= node['openvpn']['server_verification'] %>
<% end -%>
